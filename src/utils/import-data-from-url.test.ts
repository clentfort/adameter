import { afterEach, describe, expect, it } from 'vitest';
import { diaperRepository } from '@/data/diaper-repository';
import { eventsRepository } from '@/data/events-repository';
import { feedingRepository } from '@/data/feeding-repository';
import { measurementsRepository } from '@/data/measurements-repository';
import { importDataFromUrl } from './import-data-from-url';

const url =
	'https://localhost:3000/#data=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';

describe('importDataFromUrl', () => {
	afterEach(() => {
		localStorage.clear();
	});

	it('imports data from the url into the registry', async () => {
		expect(diaperRepository.getAll()).toHaveLength(0);
		expect(eventsRepository.getAll()).toHaveLength(0);
		expect(measurementsRepository.getAll()).toHaveLength(0);
		expect(feedingRepository.getAll()).toHaveLength(0);
		expect(localStorage.getItem('activeBreast')).toBeNull();
		expect(localStorage.getItem('startTime')).toBeNull();
		expect(localStorage.getItem('preferredLanguage')).toBeNull();

		await importDataFromUrl(url);

		expect(diaperRepository.getAll()).toHaveLength(137);
		expect(eventsRepository.getAll()).toHaveLength(4);
		expect(measurementsRepository.getAll()).toHaveLength(8);
		expect(feedingRepository.getAll()).toHaveLength(214);

		expect(localStorage.getItem('feedingInProgress')).toBe(
			JSON.stringify({
				breast: 'right',
				startTime: '2025-04-17T15:21:23.590Z',
			}),
		);
		expect(localStorage.getItem('preferredLanguage')).toBe('de_DE');
	});

	it('does not insert duplicated data into the repository', async () => {
		expect(diaperRepository.getAll()).toHaveLength(0);
		expect(eventsRepository.getAll()).toHaveLength(0);
		expect(measurementsRepository.getAll()).toHaveLength(0);
		expect(feedingRepository.getAll()).toHaveLength(0);
		expect(localStorage.getItem('activeBreast')).toBeNull();
		expect(localStorage.getItem('startTime')).toBeNull();
		expect(localStorage.getItem('preferredLanguage')).toBeNull();

		await importDataFromUrl(url);
		await importDataFromUrl(url);

		expect(diaperRepository.getAll()).toHaveLength(137);
		expect(eventsRepository.getAll()).toHaveLength(4);
		expect(measurementsRepository.getAll()).toHaveLength(8);
		expect(feedingRepository.getAll()).toHaveLength(214);

		expect(localStorage.getItem('feedingInProgress')).toBe(
			JSON.stringify({
				breast: 'right',
				startTime: '2025-04-17T15:21:23.590Z',
			}),
		);
		expect(localStorage.getItem('preferredLanguage')).toBe('de_DE');
	});
});
